<!doctype html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>TIL: Packing web app as desktop app on Mac without Electron | Oliver Nguyen</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="all,follow"><meta name="googlebot" content="index,follow,snippet,archive"><meta name="og:site_name" content="Oliver Nguyen"><meta property="og:title" content="TIL: Packing web app as desktop app on Mac without Electron"><meta property="og:description" content="gluon Recently, I found gluon. It is a framework for building desktop applications using web technologies. Unlike Electron, it uses the System installed Chromium or Firefox instead of the bundled Chromium. This makes it possible to use the same version of Chromium or Firefox as the one used by the user&rsquo;s browser. This also makes the application significantly smaller. At the time of this TIL, the gluon framework is only a few weeks old."><meta property="og:type" content="article"><meta property="og:url" content="https://iOliverNguyen.github.io/w/til.mac.app/"><meta property="og:image" content="https://iOliverNguyen.github.io/images/ogx.png"><meta property="article:section" content="w"><meta property="article:published_time" content="2022-11-30T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-30T00:00:00+00:00"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://iOliverNguyen.github.io/images/ogx.png"><meta name="twitter:title" content="TIL: Packing web app as desktop app on Mac without Electron"><meta name="twitter:description" content="gluon Recently, I found gluon. It is a framework for building desktop applications using web technologies. Unlike Electron, it uses the System installed Chromium or Firefox instead of the bundled Chromium. This makes it possible to use the same version of Chromium or Firefox as the one used by the user&rsquo;s browser. This also makes the application significantly smaller. At the time of this TIL, the gluon framework is only a few weeks old."><link rel="stylesheet" href="https://iOliverNguyen.github.io/css/style-classic.css"><link rel="stylesheet" href="https://iOliverNguyen.github.io/style.css"><link rel="icon" type="image/png" href="/images/favicon.png"><link href="https://iOliverNguyen.github.io/w/til.mac.app/index.xml" rel="alternate" type="application/rss+xml" title="Oliver Nguyen"><script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X8RJDCLM"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L5X8RJDCLM")</script><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">TIL: Packing web app as desktop app on Mac without Electron</h1><div class="meta"><div class="postdate"><time datetime="2022-11-30 00:00:00 &#43;0000 UTC" itemprop="datePublished">2022-11-30</time></div><div class="article-tag">&nbsp;Â· <a class="tag-link" href="/w/#app" rel="tag">app</a></div></div></header><div class="content" itemprop="articleBody"><h2 id="gluon">gluon</h2><p>Recently, I found <a href="https://github.com/gluon-framework/gluon">gluon</a>. It is a framework for building desktop applications using web technologies. Unlike Electron, it uses the System installed Chromium or Firefox instead of the bundled Chromium. This makes it possible to use the same version of Chromium or Firefox as the one used by the user&rsquo;s browser. This also makes the application significantly smaller. At the time of this TIL, the gluon framework is only a few weeks old.</p><table><thead><tr><th>Part</th><th>Gluon</th><th>Electron</th><th>Tauri</th><th>Neutralinojs</th></tr></thead><tbody><tr><td>Frontend</td><td>System installed Chromium or Firefox</td><td>Self-contained Chromium</td><td>System installed webview</td><td>System installed webview</td></tr><tr><td>Backend</td><td>System installed or bundled Node.JS</td><td>Self-contained Node.JS</td><td>Native (Rust)</td><td>Native (Any)</td></tr><tr><td>IPC</td><td>Window object</td><td>Preload</td><td>Window object</td><td>Window object</td></tr><tr><td>Status</td><td>Early in development</td><td>Production ready</td><td>Usable</td><td>Usable</td></tr><tr><td>Ecosystem</td><td>Integrated</td><td>Distributed</td><td>Integrated</td><td>Integrated</td></tr></tbody></table><p>I played with the source code a bit. I&rsquo;m creating a small app in JavaScript, able to run offline with database access. It should be fun to be able to build and package it as both Electron and Gluon apps?</p><p><img src="../_assets/gluon.png" alt="gluon"></p><h3 id="how-it-works">How it works</h3><p>It work by detecting the existing Chromium or Firefox installation, and call the corresponding binary with the <code>--app</code> flag. The <code>--app</code> flag is used to specify the URL of the application. It can be a local file or a remote URL.</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">browserPaths</span> <span class="o">=</span> <span class="p">({</span>
  <span class="nx">win32</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">platform</span> <span class="o">===</span> <span class="s1">&#39;win32&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">{</span>
    <span class="nx">chrome</span><span class="o">:</span> <span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PROGRAMFILES</span><span class="p">,</span> <span class="s1">&#39;Google&#39;</span><span class="p">,</span> <span class="s1">&#39;Chrome&#39;</span><span class="p">,</span> <span class="s1">&#39;Application&#39;</span><span class="p">,</span> <span class="s1">&#39;chrome.exe&#39;</span><span class="p">),</span>
    <span class="nx">chrome_canary</span><span class="o">:</span> <span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">LOCALAPPDATA</span><span class="p">,</span> <span class="s1">&#39;Google&#39;</span><span class="p">,</span> <span class="s1">&#39;Chrome SxS&#39;</span><span class="p">,</span> <span class="s1">&#39;Application&#39;</span><span class="p">,</span> <span class="s1">&#39;chrome.exe&#39;</span><span class="p">),</span>
    <span class="nx">edge</span><span class="o">:</span> <span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">[</span><span class="s1">&#39;PROGRAMFILES(x86)&#39;</span><span class="p">],</span> <span class="s1">&#39;Microsoft&#39;</span><span class="p">,</span> <span class="s1">&#39;Edge&#39;</span><span class="p">,</span> <span class="s1">&#39;Application&#39;</span><span class="p">,</span> <span class="s1">&#39;msedge.exe&#39;</span><span class="p">),</span>

    <span class="nx">firefox</span><span class="o">:</span> <span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PROGRAMFILES</span><span class="p">,</span> <span class="s1">&#39;Mozilla Firefox&#39;</span><span class="p">,</span> <span class="s1">&#39;firefox.exe&#39;</span><span class="p">),</span>
    <span class="nx">firefox_nightly</span><span class="o">:</span> <span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PROGRAMFILES</span><span class="p">,</span> <span class="s1">&#39;Firefox Nightly&#39;</span><span class="p">,</span> <span class="s1">&#39;firefox.exe&#39;</span><span class="p">),</span>
  <span class="p">},</span>

  <span class="nx">linux</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// these should be in path so just use the name of the binary
</span><span class="c1"></span>    <span class="nx">chrome</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;chrome&#39;</span><span class="p">,</span> <span class="s1">&#39;google-chrome&#39;</span><span class="p">,</span> <span class="s1">&#39;chrome-browser&#39;</span><span class="p">,</span> <span class="s1">&#39;google-chrome-stable&#39;</span> <span class="p">],</span>
    <span class="nx">chrome_canary</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;chrome-canary&#39;</span><span class="p">,</span> <span class="s1">&#39;google-chrome-canary&#39;</span><span class="p">,</span> <span class="s1">&#39;google-chrome-unstable&#39;</span><span class="p">,</span> <span class="s1">&#39;chrome-unstable&#39;</span> <span class="p">],</span>

    <span class="nx">chromium</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;chromium&#39;</span><span class="p">,</span> <span class="s1">&#39;chromium-browser&#39;</span> <span class="p">],</span>
    <span class="nx">chromium_snapshot</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;chromium-snapshot&#39;</span><span class="p">,</span> <span class="s1">&#39;chromium-snapshot-bin&#39;</span> <span class="p">],</span>

    <span class="nx">firefox</span><span class="o">:</span> <span class="s1">&#39;firefox&#39;</span><span class="p">,</span>
    <span class="nx">firefox_nightly</span><span class="o">:</span> <span class="s1">&#39;firefox-nightly&#39;</span>
  <span class="p">},</span>

  <span class="nx">darwin</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">chrome</span><span class="o">:</span> <span class="s1">&#39;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&#39;</span><span class="p">,</span>
    <span class="nx">edge</span><span class="o">:</span> <span class="s1">&#39;/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge&#39;</span><span class="p">,</span>
    <span class="nx">firefox</span><span class="o">:</span> <span class="s1">&#39;/Applications/Firefox.app/Contents/MacOS/firefox&#39;</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">})[</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span><span class="p">];</span>
</code></pre></div><p>Then I realize that I can do the same, by create a binary to call the installed browser engine and expose a port for communicating between Frontend and Backend. Sound similar? It is. It is the same as Tauri and Neutralinojs. But this time, use the user&rsquo;s browse engine instead of webview.</p><p>Now I&rsquo;m free to use my own Backend instead of sticking to NodeJS. And it&rsquo;s definitely Go!</p><h2 id="electron-and-nativefier">Electron and Nativefier</h2><ul><li>Electron is a framework for building cross-platform desktop applications using web technologies. It&rsquo;s too famous in developer community, no need to explain more.</li><li>Nativefier is a tool to create a desktop app from a web app. It is a wrapper around Electron.</li></ul><p>Both works by bundling Chromium and NodeJS. I won&rsquo;t include Chromium in my app, but they will help me learn how to package my app for different platforms.</p><h2 id="manually-packaging-a-web-app-as-desktop-app">Manually packaging a web app as desktop app</h2><h3 id="run-a-command-as-a-macos-application">Run a command as a MacOS application</h3><p>Create this directory structure:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt">sample.app/
  Contents/
    MacOS/
      APP
    Info.plist
</code></pre></div><p>Make a simple Go application and put it inside the <code>MacOS</code> directory:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">go build -o sample.com/MacOS/APP
</code></pre></div><p>And add <code>Info.plist</code>:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC &#34;-//Apple//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">&#34;1.0&#34;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>CFBundleDisplayName<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>APP<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>CFBundleExecutable<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>APP<span class="nt">&lt;/string&gt;</span>
  <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</code></pre></div><p>Now, we should be able to run the app by double-clicking the <code>sample.app</code> file. Or by command:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">open sample.app
</code></pre></div><h3 id="add-a-web-ui-by-calling-chrome">Add a web UI by calling Chrome</h3><p>We can use the <code>--app</code> flag to open a web app in Chrome:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="s2">&#34;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&#34;</span> --app<span class="o">=</span>http://127.0.0.1:8080
</code></pre></div><p>The web app is open as a chrome window, pointing to <code>http://127.0.0.1:8080</code>. Add a webserver there to serve the UI.</p><h3 id="some-other-details">Some other details</h3><ul><li>Add <code>--user-data-dir=&lt;path&gt;</code> to run Chrome as a separate instance. Without it, quitting Chrome will make our app exit and vice versa.</li><li>Add <code>--remote-debugging-port</code> to allow remote debugging of the Chrome instance. <a href="https://chromedevtools.github.io/devtools-protocol/">Read more</a>.</li><li>Add icon to the app by creating an <code>.icns</code> file, put it inside <code>Resources</code>, and adding <code>CFBundleIconFile</code> to <code>Info.plist</code>. Read more about <a href="https://stackoverflow.com/questions/12306223/how-to-manually-create-icns-files-using-iconutil">iconutil</a> and <a href="https://developer.apple.com/go/?id=bundle-structure">application bundle</a>.</li><li>Sign the app with <code>codesign</code> to be able to distribute the app. Sign up for <a href="https://developer.apple.com/programs/">Apple Developer</a> and <a href="https://www.digicert.com/kb/code-signing/mac-os-codesign-tool.htm">sign the app</a>.</li><li>Without code signing, if you send the app to someone else machine (or upload and re-download the app), the app will be quarantined by MacOS. To run the app, you need to right-click and select &ldquo;Open&rdquo; from the context menu. Or you can disable the quarantine by running <code>xattr -d com.apple.quarantine &lt;app&gt;</code>.</li></ul><h2 id="author">Author</h2><p>I'm Oliver Nguyen. A software maker working mostly in Go and JavaScript. I enjoy learning and seeing a better version of myself each day. Occasionally spin off new open source projects. Share knowledge and thoughts during my journey. <span>Connect with me on <a class="icon" target="_blank" rel="noopener" href="https://github.com/iOliverNguyen"><i class="fab fa-github"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://linkedin.com/in/iOliverNguyen"><i class="fab fa-linkedin"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://x.com/_OliverNguyen"><i class="fab fa-twitter"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://iOliverNguyen.medium.com"><i class="fab fa-medium-m"></i> </a>and <a class="icon" target="_blank" rel="noopener" href="mailto:iOliverNguyen@gmail.com"><i class="fas fa-envelope"></i> </a>.</span></p></div></article><div id="header-post"><a id="menu-icon" href="/w"><i class="fas fa-chevron-left fa-lg"></i> <span class="icon-text">Back</span></a> <a id="menu-icon-tablet" href="/w"><i class="fas fa-chevron-left fa-lg"></i> <span class="icon-text">Back</span></a></div><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul></ul></div><div id="toc-footer" class="tog-footer" style="display:none"><script>console.log("content",'<nav id="TableOfContents">\n  <ul>\n    <li><a href="#gluon">gluon</a>\n      <ul>\n        <li><a href="#how-it-works">How it works</a></li>\n      </ul>\n    </li>\n    <li><a href="#electron-and-nativefier">Electron and Nativefier</a></li>\n    <li><a href="#manually-packaging-a-web-app-as-desktop-app">Manually packaging a web app as desktop app</a>\n      <ul>\n        <li><a href="#run-a-command-as-a-macos-application">Run a command as a MacOS application</a></li>\n        <li><a href="#add-a-web-ui-by-calling-chrome">Add a web UI by calling Chrome</a></li>\n        <li><a href="#some-other-details">Some other details</a></li>\n      </ul>\n    </li>\n  </ul>\n</nav>')</script><div class="toc-header"><a href="#">TIL: Packing web app as desktop app on Mac without Electron</a></div><nav id="TableOfContents"><ul><li><a href="#gluon">gluon</a><ul><li><a href="#how-it-works">How it works</a></li></ul></li><li><a href="#electron-and-nativefier">Electron and Nativefier</a></li><li><a href="#manually-packaging-a-web-app-as-desktop-app">Manually packaging a web app as desktop app</a><ul><li><a href="#run-a-command-as-a-macos-application">Run a command as a MacOS application</a></li><li><a href="#add-a-web-ui-by-calling-chrome">Add a web UI by calling Chrome</a></li><li><a href="#some-other-details">Some other details</a></li></ul></li></ul></nav></div><div id="share-footer" class="tog-footer" style="display:none"><ul><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2ftil.mac.app%2f&title=TIL%3a%20Packing%20web%20app%20as%20desktop%20app%20on%20Mac%20without%20Electron"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fiOliverNguyen.github.io%2fw%2ftil.mac.app%2f"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://x.com/share?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2ftil.mac.app%2f&text=TIL%3a%20Packing%20web%20app%20as%20desktop%20app%20on%20Mac%20without%20Electron"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2ftil.mac.app%2f&title=TIL%3a%20Packing%20web%20app%20as%20desktop%20app%20on%20Mac%20without%20Electron"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fiOliverNguyen.github.io%2fw%2ftil.mac.app%2f&t=TIL%3a%20Packing%20web%20app%20as%20desktop%20app%20on%20Mac%20without%20Electron"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="home" class="icon" href="/w"><i class="fas fa-chevron-left fa-lg" aria-hidden="true"></i> Back</a> <a id="toc" class="icon" href="#" onclick='return $(".tog-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick='return $(".tog-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2024 Oliver Nguyen.</div><div class="footer-right"><nav><ul></ul></nav></div></footer></div></body><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script src="/lib/jquery/jquery.min.js"></script><script src="/js/main.js"></script></html>