<!doctype html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Pull data from HackerNews API and dump to JSON files | Oliver Nguyen</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="all,follow"><meta name="googlebot" content="index,follow,snippet,archive"><meta name="og:site_name" content="Oliver Nguyen"><meta property="og:title" content="Pull data from HackerNews API and dump to JSON files"><meta property="og:description" content="I wrote a simple script to download the HackerNews data from HackerNews API. It downloads the data in JSON format and stores it as a collection of files. The first time it runs, it will create the directory data to store the data. Subsequent runs will update the data in the directory.
At the time of this writing, the HackerNew database has about 35 million items.
Usage cd hackernews direnv allow go run ."><meta property="og:type" content="article"><meta property="og:url" content="https://iOliverNguyen.github.io/w/hackernews/"><meta property="og:image" content="https://iOliverNguyen.github.io/images/ogx.png"><meta property="article:section" content="w"><meta property="article:published_time" content="2023-03-20T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-20T00:00:00+00:00"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://iOliverNguyen.github.io/images/ogx.png"><meta name="twitter:title" content="Pull data from HackerNews API and dump to JSON files"><meta name="twitter:description" content="I wrote a simple script to download the HackerNews data from HackerNews API. It downloads the data in JSON format and stores it as a collection of files. The first time it runs, it will create the directory data to store the data. Subsequent runs will update the data in the directory.
At the time of this writing, the HackerNew database has about 35 million items.
Usage cd hackernews direnv allow go run ."><link rel="stylesheet" href="https://iOliverNguyen.github.io/css/style-classic.css"><link rel="stylesheet" href="https://iOliverNguyen.github.io/style.css"><link rel="icon" type="image/png" href="/images/favicon.png"><link href="https://iOliverNguyen.github.io/w/hackernews/index.xml" rel="alternate" type="application/rss+xml" title="Oliver Nguyen"><script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X8RJDCLM"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L5X8RJDCLM")</script><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Pull data from HackerNews API and dump to JSON files</h1><div class="meta"><div class="postdate"><time datetime="2023-03-20 00:00:00 &#43;0000 UTC" itemprop="datePublished">2023-03-20</time></div><div class="article-tag">&nbsp;Â· <a class="tag-link" href="/w/#go" rel="tag">go</a></div></div></header><div class="content" itemprop="articleBody"><p>I wrote a simple script to download the HackerNews data from <a href="https://github.com/HackerNews/API">HackerNews API</a>. It downloads the data in JSON format and stores it as a collection of files. The first time it runs, it will create the directory <code>data</code> to store the data. Subsequent runs will update the data in the directory.</p><p>At the time of this writing, the HackerNew database has about 35 million items.</p><h2 id="usage">Usage</h2><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> hackernews
direnv allow
go run . sync

<span class="c1"># for debugging</span>
go run . --debug sync
</code></pre></div><p>Install <a href="https://direnv.net/">direnv</a> if necessary.</p><h2 id="how-it-works">How it works</h2><p>The script will download the data from the <a href="https://github.com/HackerNews/API">HackerNews API</a> and store it in the <code>data</code> directory.</p><ul><li>It starts with <a href="https://hacker-news.firebaseio.com/v0/maxitem.json">max item id</a> and works its way down to 1.</li><li>It spans 30 goroutines to download the data in parallel.</li><li>Data are split into chunks of 1000 items a file, and 1000 files a directory. Every 100 items download will be stored into a file as <code>&lt;number&gt;.partial.jsonl</code>, and when all 1000 items of the chunk are downloaded, the file will be named to <code>&lt;number&gt;.json</code>. It will skip the items that are already downloaded.</li><li>Subsequent runs will pick up the data from <code>.partial.jsonl</code> file and continue updating the data. It also take the new max item id and continue downloading the data from there.</li><li>Use <code>--debug</code> flag to limit the goroutine, the number of items per chunk, etc. for easily seeing progress and debugging.</li></ul><h2 id="author">Author</h2><p>I'm Oliver Nguyen. A software maker working mostly in Go and JavaScript. I enjoy learning and seeing a better version of myself each day. Occasionally spin off new open source projects. Share knowledge and thoughts during my journey. <span>Connect with me on <a class="icon" target="_blank" rel="noopener" href="https://github.com/iOliverNguyen"><i class="fab fa-github"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://linkedin.com/in/iOliverNguyen"><i class="fab fa-linkedin"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://twitter.com/_OliverNguyen"><i class="fab fa-twitter"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://iOliverNguyen.medium.com"><i class="fab fa-medium-m"></i> </a>and <a class="icon" target="_blank" rel="noopener" href="mailto:iOliverNguyen@gmail.com"><i class="fas fa-envelope"></i> </a>.</span></p></div></article><div id="header-post"><a id="menu-icon" href="/w"><i class="fas fa-chevron-left fa-lg"></i> <span class="icon-text">Back</span></a> <a id="menu-icon-tablet" href="/w"><i class="fas fa-chevron-left fa-lg"></i> <span class="icon-text">Back</span></a></div><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul></ul></div><div id="toc-footer" class="tog-footer" style="display:none"><script>console.log("content",'<nav id="TableOfContents">\n  <ul>\n    <li><a href="#usage">Usage</a></li>\n    <li><a href="#how-it-works">How it works</a></li>\n  </ul>\n</nav>')</script><div class="toc-header"><a href="#">Pull data from HackerNews API and dump to JSON files</a></div><nav id="TableOfContents"><ul><li><a href="#usage">Usage</a></li><li><a href="#how-it-works">How it works</a></li></ul></nav></div><div id="share-footer" class="tog-footer" style="display:none"><ul><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fhackernews%2f&title=Pull%20data%20from%20HackerNews%20API%20and%20dump%20to%20JSON%20files"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fhackernews%2f"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fhackernews%2f&text=Pull%20data%20from%20HackerNews%20API%20and%20dump%20to%20JSON%20files"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fhackernews%2f&title=Pull%20data%20from%20HackerNews%20API%20and%20dump%20to%20JSON%20files"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fhackernews%2f&t=Pull%20data%20from%20HackerNews%20API%20and%20dump%20to%20JSON%20files"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="home" class="icon" href="/w"><i class="fas fa-chevron-left fa-lg" aria-hidden="true"></i> Back</a> <a id="toc" class="icon" href="#" onclick='return $(".tog-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick='return $(".tog-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2023 Oliver Nguyen.</div><div class="footer-right"><nav><ul></ul></nav></div></footer></div></body><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script src="/lib/jquery/jquery.min.js"></script><script src="/js/main.js"></script></html>