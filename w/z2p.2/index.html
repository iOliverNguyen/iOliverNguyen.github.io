<!doctype html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Zero2Prod: Day 2 â€“ Form, FromRequest, serde | Oliver Nguyen</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="all,follow"><meta name="googlebot" content="index,follow,snippet,archive"><meta name="og:site_name" content="Oliver Nguyen"><meta property="og:title" content="Zero2Prod: Day 2 â€“ Form, FromRequest, serde"><meta property="og:description" content="A blog visitor can subscribe to the newsletter  She can submit a form with name and email. If both name and email are valid, we should return 200 OK Otherwise, return 400 Bad Request  Writing tests Build a multipart form:
letform=multipart::Form::new().text(&#34;name&#34;,&#34;Oliver Nguyen&#34;).text(&#34;email&#34;,&#34;oliver@example.com&#34;);Create a new client and send the request:
letaddr=spawn_app();letclient=reqwest::Client::new();letresp=client.post(&amp;format!(&#34;{}/subscribe&#34;,addr)).multipart(form).send().await.expect(&#34;Failed to send request&#34;);Define FormData with #[derive(Serialize)]
#[derive(Serialize)]struct FormData{name: String,email: String,}Add some test cases:
asyncfn subscribe_returns_a_400_for_invalid_form_data(){struct TestCase{name: String,email: String,expected_error: String,}letaddr=spawn_app();letclient=reqwest::Client::new();lettestcases=vec!"><meta property="og:type" content="article"><meta property="og:url" content="https://iOliverNguyen.github.io/w/z2p.2/"><meta property="og:image" content="https://iOliverNguyen.github.io/images/ogx.png"><meta property="article:section" content="w"><meta property="article:published_time" content="2024-08-30T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-30T00:00:00+00:00"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://iOliverNguyen.github.io/images/ogx.png"><meta name="twitter:title" content="Zero2Prod: Day 2 â€“ Form, FromRequest, serde"><meta name="twitter:description" content="A blog visitor can subscribe to the newsletter  She can submit a form with name and email. If both name and email are valid, we should return 200 OK Otherwise, return 400 Bad Request  Writing tests Build a multipart form:
letform=multipart::Form::new().text(&#34;name&#34;,&#34;Oliver Nguyen&#34;).text(&#34;email&#34;,&#34;oliver@example.com&#34;);Create a new client and send the request:
letaddr=spawn_app();letclient=reqwest::Client::new();letresp=client.post(&amp;format!(&#34;{}/subscribe&#34;,addr)).multipart(form).send().await.expect(&#34;Failed to send request&#34;);Define FormData with #[derive(Serialize)]
#[derive(Serialize)]struct FormData{name: String,email: String,}Add some test cases:
asyncfn subscribe_returns_a_400_for_invalid_form_data(){struct TestCase{name: String,email: String,expected_error: String,}letaddr=spawn_app();letclient=reqwest::Client::new();lettestcases=vec!"><link rel="stylesheet" href="https://iOliverNguyen.github.io/css/style-classic.css"><link rel="stylesheet" href="https://iOliverNguyen.github.io/style.css"><link rel="icon" type="image/png" href="/images/favicon.png"><link href="https://iOliverNguyen.github.io/w/z2p.2/index.xml" rel="alternate" type="application/rss+xml" title="Oliver Nguyen"><script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X8RJDCLM"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L5X8RJDCLM")</script><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Zero2Prod: Day 2 â€“ Form, FromRequest, serde</h1><div class="meta"><div class="postdate"><time datetime="2024-08-30 00:00:00 &#43;0000 UTC" itemprop="datePublished">2024-08-30</time></div><div class="article-tag">&nbsp;Â· <a class="tag-link" href="/w/#rust" rel="tag">rust</a></div></div></header><div class="content" itemprop="articleBody"><h2 id="a-blog-visitor-can-subscribe-to-the-newsletter">A blog visitor can subscribe to the newsletter</h2><ul><li>She can submit a form with name and email.</li><li>If both name and email are valid, we should return <code>200 OK</code></li><li>Otherwise, return <code>400 Bad Request</code></li></ul><h3 id="writing-tests">Writing tests</h3><p>Build a multipart form:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="kd">let</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">multipart</span>::<span class="n">Form</span>::<span class="n">new</span><span class="p">()</span><span class="w">
</span><span class="w">    </span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Oliver Nguyen&#34;</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="s">&#34;email&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;oliver@example.com&#34;</span><span class="p">);</span><span class="w">
</span></code></pre></div><p>Create a new client and send the request:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="kd">let</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spawn_app</span><span class="p">();</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="kd">let</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reqwest</span>::<span class="n">Client</span>::<span class="n">new</span><span class="p">();</span><span class="w">
</span><span class="w"></span><span class="kd">let</span><span class="w"> </span><span class="n">resp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="w">
</span><span class="w">	</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">&#34;{}/subscribe&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">addr</span><span class="p">))</span><span class="w">
</span><span class="w">	</span><span class="p">.</span><span class="n">multipart</span><span class="p">(</span><span class="n">form</span><span class="p">)</span><span class="w">
</span><span class="w">	</span><span class="p">.</span><span class="n">send</span><span class="p">()</span><span class="w">
</span><span class="w">	</span><span class="p">.</span><span class="k">await</span><span class="w">
</span><span class="w">	</span><span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">&#34;Failed to send request&#34;</span><span class="p">);</span><span class="w">
</span></code></pre></div><p>Define <code>FormData</code> with <code>#[derive(Serialize)]</code></p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="cp">#[derive(Serialize)]</span><span class="w">
</span><span class="w"></span><span class="k">struct</span> <span class="nc">FormData</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="n">name</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">email</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><p>Add some test cases:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">subscribe_returns_a_400_for_invalid_form_data</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">struct</span> <span class="nc">TestCase</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="n">name</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="w">        </span><span class="n">email</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="w">        </span><span class="n">expected_error</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spawn_app</span><span class="p">();</span><span class="w">
</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reqwest</span>::<span class="n">Client</span>::<span class="n">new</span><span class="p">();</span><span class="w">
</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">testcases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="w">
</span><span class="w">        </span><span class="n">TestCase</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="n">name</span>: <span class="s">&#34;&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">            </span><span class="n">email</span>: <span class="s">&#34;oliver@example.com&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">            </span><span class="n">expected_error</span>: <span class="s">&#34;missing name&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">        </span><span class="p">},</span><span class="w">
</span><span class="w">        </span><span class="n">TestCase</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="n">name</span>: <span class="s">&#34;Oliver Nguyen&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">            </span><span class="n">email</span>: <span class="s">&#34;&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">            </span><span class="n">expected_error</span>: <span class="s">&#34;missing email&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">        </span><span class="p">},</span><span class="w">
</span><span class="w">        </span><span class="n">TestCase</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="n">name</span>: <span class="s">&#34;&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">            </span><span class="n">email</span>: <span class="s">&#34;&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">            </span><span class="n">expected_error</span>: <span class="s">&#34;missing name and email&#34;</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span><span class="w">
</span><span class="w">        </span><span class="p">},</span><span class="w">
</span><span class="w">    </span><span class="p">];</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">tc</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">testcases</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FormData</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="n">name</span>: <span class="nc">tc</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w">
</span><span class="w">            </span><span class="n">email</span>: <span class="nc">tc</span><span class="p">.</span><span class="n">email</span><span class="p">,</span><span class="w">
</span><span class="w">        </span><span class="p">};</span><span class="w">
</span><span class="w">
</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">resp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="w">
</span><span class="w">            </span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">&#34;{}/subscribe&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">addr</span><span class="p">))</span><span class="w">
</span><span class="w">            </span><span class="c1">// ðŸ‘‡ .form() will set Content-Type: x-www-form-urlencoded
</span><span class="c1"></span><span class="w">            </span><span class="p">.</span><span class="n">form</span><span class="p">(</span><span class="o">&amp;</span><span class="n">form</span><span class="p">)</span><span class="w">
</span><span class="w">            </span><span class="p">.</span><span class="n">send</span><span class="p">()</span><span class="w">
</span><span class="w">            </span><span class="p">.</span><span class="k">await</span><span class="w">
</span><span class="w">            </span><span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">&#34;Failed to send request&#34;</span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w">        </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="w">
</span><span class="w">            </span><span class="n">resp</span><span class="p">.</span><span class="n">status</span><span class="p">().</span><span class="n">as_u16</span><span class="p">(),</span><span class="w">
</span><span class="w">            </span><span class="mi">400</span><span class="p">,</span><span class="w">
</span><span class="w">            </span><span class="s">&#34;expected 400, got {}&#34;</span><span class="p">,</span><span class="w">
</span><span class="w">            </span><span class="n">resp</span><span class="p">.</span><span class="n">status</span><span class="p">()</span><span class="w">
</span><span class="w">        </span><span class="p">);</span><span class="w">
</span><span class="w">        </span><span class="c1">// ... more checks
</span><span class="c1"></span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id="implement-subscribe">Implement /subscribe</h2><ul><li>Add a new route <code>/subscribe</code></li><li>Declare a struct <code>SubscribeRequest</code> to store the form data</li><li>Use <code>#[derive(serde::Deserialize)]</code></li><li><code>web::Form&lt;SubscribeRequest&gt;</code> implements <code>Handler&lt;FromRequest&gt;</code></li></ul><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="n">App</span>::<span class="n">new</span><span class="p">().</span><span class="n">route</span><span class="p">(</span><span class="s">&#34;/subscribe&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">web</span>::<span class="n">post</span><span class="p">().</span><span class="n">to</span><span class="p">(</span><span class="n">subscribe</span><span class="p">))</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="cp">#[derive(serde::Deserialize)]</span><span class="w">
</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">SubscribeForm</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">email</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">name</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">// ðŸ‘‡ web::Form&lt;...&gt; expects Content-Type: x-www-form-urlencoded
</span><span class="c1"></span><span class="k">pub</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">subscribe</span><span class="p">(</span><span class="n">form</span>: <span class="nc">web</span>::<span class="n">Form</span><span class="o">&lt;</span><span class="n">SubscribeForm</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">impl</span><span class="w"> </span><span class="n">Responder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w"></span><span class="k">match</span><span class="w"> </span><span class="p">(</span><span class="n">form</span><span class="p">.</span><span class="n">name</span><span class="p">.</span><span class="n">is_empty</span><span class="p">(),</span><span class="w"> </span><span class="n">form</span><span class="p">.</span><span class="n">email</span><span class="p">.</span><span class="n">is_empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="p">(</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">HttpResponse</span>::<span class="n">BadRequest</span><span class="p">().</span><span class="n">json</span><span class="p">(</span><span class="n">json</span><span class="o">!</span><span class="p">({</span><span class="w"> </span><span class="s">&#34;error&#34;</span>: <span class="s">&#34;missing name and email&#34;</span><span class="w"> </span><span class="p">}));</span><span class="w">
</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="w">        </span><span class="p">(</span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">HttpResponse</span>::<span class="n">BadRequest</span><span class="p">().</span><span class="n">json</span><span class="p">(</span><span class="n">json</span><span class="o">!</span><span class="p">({</span><span class="w"> </span><span class="s">&#34;error&#34;</span>: <span class="s">&#34;missing email&#34;</span><span class="w"> </span><span class="p">}));</span><span class="w">
</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="w">        </span><span class="p">(</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">HttpResponse</span>::<span class="n">BadRequest</span><span class="p">().</span><span class="n">json</span><span class="p">(</span><span class="n">json</span><span class="o">!</span><span class="p">({</span><span class="w"> </span><span class="s">&#34;error&#34;</span>: <span class="s">&#34;missing name&#34;</span><span class="w"> </span><span class="p">}));</span><span class="w">
</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="w">        </span><span class="p">(</span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">HttpResponse</span>::<span class="nb">Ok</span><span class="p">()</span><span class="w">
</span><span class="w">            </span><span class="p">.</span><span class="n">json</span><span class="p">(</span><span class="n">json</span><span class="o">!</span><span class="p">({</span><span class="w"> </span><span class="s">&#34;name&#34;</span>: <span class="nc">form</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;email&#34;</span>: <span class="nc">form</span><span class="p">.</span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;status&#34;</span>: <span class="s">&#34;ok&#34;</span><span class="w"> </span><span class="p">})),</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id="an-example-implement-of-serialize-trait-for-vect">An example implement of <code>Serialize</code> trait for <code>Vec&lt;T&gt;</code></h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="k">use</span><span class="w"> </span><span class="n">serde</span>::<span class="n">ser</span>::<span class="p">{</span><span class="n">Serialize</span><span class="p">,</span><span class="w"> </span><span class="n">Serializer</span><span class="p">,</span><span class="w"> </span><span class="n">SerializeSeq</span><span class="p">};</span><span class="w">
</span><span class="w"></span><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Serialize</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w">
</span><span class="w">    </span><span class="n">T</span>: <span class="nc">Serialize</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">fn</span> <span class="nf">serialize</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">serializer</span>: <span class="nc">S</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="n">S</span>::<span class="nb">Ok</span><span class="p">,</span><span class="w"> </span><span class="n">S</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="k">where</span><span class="w">
</span><span class="w">        </span><span class="n">S</span>: <span class="nc">Serializer</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">seq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serializer</span><span class="p">.</span><span class="n">serialize_seq</span><span class="p">(</span><span class="nb">Some</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">len</span><span class="p">()))</span><span class="o">?</span><span class="p">;</span><span class="w">
</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="bp">self</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="n">seq</span><span class="p">.</span><span class="n">serialize_element</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="o">?</span><span class="p">;</span><span class="w">
</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="w">        </span><span class="n">seq</span><span class="p">.</span><span class="n">end</span><span class="p">()</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id="form-and-fromrequest"><code>Form</code> and <code>FromRequest</code></h2><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="cp">#[derive(PartialEq, Eq, PartialOrd, Ord)]</span><span class="w">
</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Form</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="k">pub</span><span class="w"> </span><span class="n">T</span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">FromRequest</span>: <span class="nb">Sized</span> <span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">type</span> <span class="nc">Error</span>: <span class="nb">Into</span><span class="o">&lt;</span><span class="n">Error</span><span class="o">&gt;</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="k">type</span> <span class="nc">Future</span>: <span class="nc">Future</span><span class="o">&lt;</span><span class="n">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="bp">Self</span><span class="p">,</span><span class="w"> </span><span class="bp">Self</span>::<span class="n">Error</span><span class="o">&gt;&gt;</span><span class="p">;</span><span class="w">
</span><span class="w">    
</span><span class="w">    </span><span class="k">fn</span> <span class="nf">from_request</span><span class="p">(</span><span class="n">req</span>: <span class="kp">&amp;</span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> </span><span class="n">payload</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Payload</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Future</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">fn</span> <span class="nf">extract</span><span class="p">(</span><span class="n">req</span>: <span class="kp">&amp;</span><span class="nc">HttpRequest</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Future</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="bp">Self</span>::<span class="n">from_request</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">Payload</span>::<span class="nb">None</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FromRequest</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Form</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w">
</span><span class="w">    </span><span class="n">T</span>: <span class="nc">DeserializeOwned</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">type</span> <span class="nc">Error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Error</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="k">type</span> <span class="nc">Future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FormExtractFut</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="cp">#[inline]</span><span class="w">
</span><span class="w">    </span><span class="k">fn</span> <span class="nf">from_request</span><span class="p">(</span><span class="n">req</span>: <span class="kp">&amp;</span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> </span><span class="n">payload</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Payload</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Future</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">FormConfig</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">limit</span><span class="p">,</span><span class="w"> </span><span class="n">err_handler</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FormConfig</span>::<span class="n">from_req</span><span class="p">(</span><span class="n">req</span><span class="p">).</span><span class="n">clone</span><span class="p">();</span><span class="w">
</span><span class="w">
</span><span class="w">        </span><span class="n">FormExtractFut</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="n">fut</span>: <span class="nc">UrlEncoded</span>::<span class="n">new</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">payload</span><span class="p">).</span><span class="n">limit</span><span class="p">(</span><span class="n">limit</span><span class="p">),</span><span class="w">
</span><span class="w">            </span><span class="n">req</span>: <span class="nc">req</span><span class="p">.</span><span class="n">clone</span><span class="p">(),</span><span class="w">
</span><span class="w">            </span><span class="n">err_handler</span><span class="p">,</span><span class="w">
</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><p>We can think about <code>fn from_request()</code> as <code>async fn from_request()</code>:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="k">fn</span> <span class="nf">from_request</span><span class="p">(</span><span class="w">
</span><span class="w">    </span><span class="n">req</span>: <span class="kp">&amp;</span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> 
</span><span class="w">    </span><span class="n">payload</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Payload</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Future</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">// similar to this pseudo code (async is not supported in trait yet)
</span><span class="c1"></span><span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">from_request</span><span class="p">(</span><span class="w">
</span><span class="w">	</span><span class="n">req</span>: <span class="kp">&amp;</span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> 
</span><span class="w">    </span><span class="n">payload</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Payload</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="bp">Self</span><span class="p">,</span><span class="w"> </span><span class="bp">Self</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w">
</span></code></pre></div><p><code>FormExtractFut&lt;T&gt;</code> implements <code>Future&lt;T&gt;</code> with <code>fn poll()</code>:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Future</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FormExtractFut</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w">
</span><span class="w">    </span><span class="n">T</span>: <span class="nc">DeserializeOwned</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">&#39;</span><span class="nb">static</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">type</span> <span class="nc">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">Form</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="k">fn</span> <span class="nf">poll</span><span class="p">(</span><span class="bp">self</span>: <span class="nc">Pin</span><span class="o">&lt;&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">cx</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Context</span><span class="o">&lt;&#39;</span><span class="nb">_</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Poll</span><span class="o">&lt;</span><span class="bp">Self</span>::<span class="n">Output</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">get_mut</span><span class="p">();</span><span class="w">
</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ready</span><span class="o">!</span><span class="p">(</span><span class="n">Pin</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">fut</span><span class="p">).</span><span class="n">poll</span><span class="p">(</span><span class="n">cx</span><span class="p">));</span><span class="w">
</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">            </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="o">&amp;</span><span class="n">this</span><span class="p">.</span><span class="n">err_handler</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">                </span><span class="nb">Some</span><span class="p">(</span><span class="n">err_handler</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">Err</span><span class="p">((</span><span class="n">err_handler</span><span class="p">)(</span><span class="n">err</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">this</span><span class="p">.</span><span class="n">req</span><span class="p">)),</span><span class="w">
</span><span class="w">                </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">.</span><span class="n">into</span><span class="p">()),</span><span class="w">
</span><span class="w">            </span><span class="p">},</span><span class="w">
</span><span class="w">            </span><span class="nb">Ok</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">Form</span><span class="p">(</span><span class="n">item</span><span class="p">)),</span><span class="w">
</span><span class="w">        </span><span class="p">};</span><span class="w">
</span><span class="w">        </span><span class="n">Poll</span>::<span class="n">Ready</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id="notes">Notes</h3><ul><li>Using <code>web::Form&lt;SubscribeForm&gt;</code> in handler will verify that the request header is <code>x-www-form-urlencoded</code>.</li><li>Using <code>.form()</code> in client request will set request header as <code>x-www-form-urlencoded</code>.</li></ul><h2 id="parse-json-with-serde-and-write-assertions">Parse JSON with <code>serde</code> and write assertions</h2><p>Using <code>serde_json::Value</code> and access as <code>resp_body[&quot;error&quot;]</code>:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="kd">let</span><span class="w"> </span><span class="n">resp_body</span>: <span class="nc">serde_json</span>::<span class="n">Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resp</span><span class="p">.</span><span class="n">json</span><span class="p">().</span><span class="k">await</span><span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">&#34;Failed to parse JSON&#34;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="kd">let</span><span class="w"> </span><span class="n">error_message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resp_body</span><span class="p">[</span><span class="s">&#34;error&#34;</span><span class="p">]</span><span class="w">
</span><span class="w">	</span><span class="p">.</span><span class="n">as_str</span><span class="p">()</span><span class="w">
</span><span class="w">	</span><span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">&#34;Failed to get error message&#34;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="fm">assert_eq!</span><span class="p">(</span><span class="w">
</span><span class="w">	</span><span class="n">error_message</span><span class="p">,</span><span class="w"> </span><span class="n">tc</span><span class="p">.</span><span class="n">expected_error</span><span class="p">,</span><span class="w">
</span><span class="w">	</span><span class="s">&#34;expected error message &#39;{}&#39;, got &#39;{}&#39;&#34;</span><span class="p">,</span><span class="w">
</span><span class="w">	</span><span class="n">tc</span><span class="p">.</span><span class="n">expected_error</span><span class="p">,</span><span class="w"> </span><span class="n">error_message</span><span class="w">
</span><span class="w"></span><span class="p">);</span><span class="w">
</span></code></pre></div><p>Define and parse with a struct:</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="cp">#[derive(Deserialize)]</span><span class="w">
</span><span class="w"></span><span class="k">struct</span> <span class="nc">SubscribeError</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="n">error</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">// Parse the response body as JSON
</span><span class="c1"></span><span class="kd">let</span><span class="w"> </span><span class="n">resp_body</span>: <span class="nc">SubscribeError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resp</span><span class="p">.</span><span class="n">json</span><span class="p">().</span><span class="k">await</span><span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">&#34;Failed to parse JSON&#34;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="fm">assert_eq!</span><span class="p">(</span><span class="w">
</span><span class="w">	</span><span class="n">resp_body</span><span class="p">.</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">tc</span><span class="p">.</span><span class="n">expected_error</span><span class="p">,</span><span class="w">
</span><span class="w">	</span><span class="s">&#34;expected error message &#39;{}&#39;, got &#39;{}&#39;&#34;</span><span class="p">,</span><span class="w">
</span><span class="w">	</span><span class="n">tc</span><span class="p">.</span><span class="n">expected_error</span><span class="p">,</span><span class="w"> </span><span class="n">resp_body</span><span class="p">.</span><span class="n">error</span><span class="w">
</span><span class="w"></span><span class="p">);</span><span class="w">
</span></code></pre></div><h3 id="notes-1">Notes</h3><ul><li><code>serde</code> is a framework for (de)serialization, providing a set of interfaces: <code>Serialize</code>, <code>Serializer</code>, etc.</li><li><code>serde_json</code> provides implementation for JSON</li><li>It&rsquo;s efficient due to <a href="https://rustc-dev-guide.rust-lang.org/backend/monomorph.html">monomorphization</a>, which generate different code for each concrete type.<ul><li>Benefits: <em>zero-cost abstraction</em> - we do not pay any runtime code for generic.</li><li>Downside: the binary will be bigger, compile time is longer.</li></ul></li><li><a href="https://www.joshmcguigan.com/blog/understanding-serde/">Understanding Serde</a> by <a href="https://www.joshmcguigan.com/">Joshua Mcguigan</a></li></ul><h2 id="author">Author</h2><p>I'm Oliver Nguyen. A software maker working mostly in Go and JavaScript. I enjoy learning and seeing a better version of myself each day. Occasionally spin off new open source projects. Share knowledge and thoughts during my journey. <span>Connect with me on <a class="icon" target="_blank" rel="noopener" href="https://github.com/iOliverNguyen"><i class="fab fa-github"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://linkedin.com/in/iOliverNguyen"><i class="fab fa-linkedin"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://x.com/_OliverNguyen"><i class="fab fa-twitter"></i> </a>, <a class="icon" target="_blank" rel="noopener" href="https://iOliverNguyen.medium.com"><i class="fab fa-medium-m"></i> </a>and <a class="icon" target="_blank" rel="noopener" href="mailto:iOliverNguyen@gmail.com"><i class="fas fa-envelope"></i> </a>.</span></p></div></article><div id="header-post"><a id="menu-icon" href="/w"><i class="fas fa-chevron-left fa-lg"></i> <span class="icon-text">Back</span></a> <a id="menu-icon-tablet" href="/w"><i class="fas fa-chevron-left fa-lg"></i> <span class="icon-text">Back</span></a></div><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul></ul></div><div id="toc-footer" class="tog-footer" style="display:none"><script>console.log("content",'<nav id="TableOfContents">\n  <ul>\n    <li><a href="#a-blog-visitor-can-subscribe-to-the-newsletter">A blog visitor can subscribe to the newsletter</a>\n      <ul>\n        <li><a href="#writing-tests">Writing tests</a></li>\n      </ul>\n    </li>\n    <li><a href="#implement-subscribe">Implement /subscribe</a>\n      <ul>\n        <li><a href="#an-example-implement-of-serialize-trait-for-vect">An example implement of <code>Serialize</code> trait for <code>Vec&lt;T&gt;</code></a></li>\n      </ul>\n    </li>\n    <li><a href="#form-and-fromrequest"><code>Form</code> and <code>FromRequest</code></a>\n      <ul>\n        <li><a href="#notes">Notes</a></li>\n      </ul>\n    </li>\n    <li><a href="#parse-json-with-serde-and-write-assertions">Parse JSON with <code>serde</code> and write assertions</a>\n      <ul>\n        <li><a href="#notes-1">Notes</a></li>\n      </ul>\n    </li>\n  </ul>\n</nav>')</script><div class="toc-header"><a href="#">Zero2Prod: Day 2 â€“ Form, FromRequest, serde</a></div><nav id="TableOfContents"><ul><li><a href="#a-blog-visitor-can-subscribe-to-the-newsletter">A blog visitor can subscribe to the newsletter</a><ul><li><a href="#writing-tests">Writing tests</a></li></ul></li><li><a href="#implement-subscribe">Implement /subscribe</a><ul><li><a href="#an-example-implement-of-serialize-trait-for-vect">An example implement of <code>Serialize</code> trait for <code>Vec&lt;T&gt;</code></a></li></ul></li><li><a href="#form-and-fromrequest"><code>Form</code> and <code>FromRequest</code></a><ul><li><a href="#notes">Notes</a></li></ul></li><li><a href="#parse-json-with-serde-and-write-assertions">Parse JSON with <code>serde</code> and write assertions</a><ul><li><a href="#notes-1">Notes</a></li></ul></li></ul></nav></div><div id="share-footer" class="tog-footer" style="display:none"><ul><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fz2p.2%2f&title=Zero2Prod%3a%20Day%202%20%e2%80%93%20Form%2c%20FromRequest%2c%20serde"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fz2p.2%2f"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://x.com/share?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fz2p.2%2f&text=Zero2Prod%3a%20Day%202%20%e2%80%93%20Form%2c%20FromRequest%2c%20serde"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fz2p.2%2f&title=Zero2Prod%3a%20Day%202%20%e2%80%93%20Form%2c%20FromRequest%2c%20serde"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fiOliverNguyen.github.io%2fw%2fz2p.2%2f&t=Zero2Prod%3a%20Day%202%20%e2%80%93%20Form%2c%20FromRequest%2c%20serde"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="home" class="icon" href="/w"><i class="fas fa-chevron-left fa-lg" aria-hidden="true"></i> Back</a> <a id="toc" class="icon" href="#" onclick='return $(".tog-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick='return $(".tog-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2024 Oliver Nguyen.</div><div class="footer-right"><nav><ul></ul></nav></div></footer></div></body><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script src="/lib/jquery/jquery.min.js"></script><script src="/js/main.js"></script></html>